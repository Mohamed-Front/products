import{_ as Q,u as q,a as A,r as l,o as G,b as i,c as d,d as h,e as n,f as t,F as B,g as H,t as c,h as P,i as J,w as f,j as K,n as O,p as W,k as X,s as Y}from"./index-59a0f5c7.js";import{N as Z}from"./nav-bff8b1c3.js";const g=u=>(W("data-v-7a2421df"),u=u(),X(),u),ee={class:"max-w-7xl mx-auto p-4"},te={class:"flex justify-between items-center mb-4"},se=g(()=>t("h1",{class:"text-2xl font-bold"},"Products",-1)),ae={class:"flex items-center space-x-2"},oe={class:"p-input-icon-left"},le=g(()=>t("i",{class:"pi pi-search"},null,-1)),ne={key:0,class:"flex justify-center items-center h-64"},ce={key:1},re={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},ie={class:"flex justify-between p-4"},de=["src","alt"],ue=["title"],pe={class:"space-y-2"},ve={class:"flex justify-between items-center"},me=g(()=>t("span",{class:"text-sm text-gray-500"},"Price:",-1)),_e={class:"font-bold text-primary"},he={class:"flex justify-between items-center"},fe=g(()=>t("span",{class:"text-sm text-gray-500"},"Platform:",-1)),ge={class:"flex justify-between"},xe={class:"flex justify-between items-center mt-6"},ye={class:"text-sm text-gray-500"},be={class:"flex items-center space-x-2"},we={class:"px-2"},Ce={setup(u){const E=q(),p=A(),x=l(!0),k=l({records:[]}),y=l(""),o=l(1),b=l(0),r=l(20),v=l(0),S=l(0),V=l(0),m=l([]);let T=null;const _=async()=>{try{x.value=!0;const e=await P.get("/api/products/search",{params:{keyword:y.value||"peanut butter",page:o.value,size:r.value}});k.value=e.data.data,b.value=e.data.data.total,v.value=e.data.data.pages,S.value=(o.value-1)*r.value+1,V.value=Math.min(o.value*r.value,b.value)}catch(e){p.add({severity:"error",summary:"Error",detail:"Failed to load products",life:3e3}),console.error("Error fetching data:",e)}finally{x.value=!1}},I=async()=>{try{const e=await P.get("/api/products/selections",{params:{page:1,size:20}});m.value=e.data.data.records.map(a=>a.spuCode)}catch(e){p.add({severity:"error",summary:"Error",detail:"Failed to load selected products",life:3e3}),console.error("Error fetching selected products:",e)}},N=async e=>{try{await P.post("/api/products/selections",{product_codes:[e]}),p.add({severity:"success",summary:"Selection Updated",detail:`Product ${e} selection updated`,life:3e3})}catch(a){p.add({severity:"error",summary:"Error",detail:"Failed to update selection",life:3e3}),console.error("Error updating selection:",a)}},F=()=>{clearTimeout(T),T=setTimeout(()=>{o.value=1,_()},500)},j=e=>{e>=1&&e<=v.value&&(o.value=e,_())},U=e=>{r.value=e.value,o.value=1,_()},$=e=>{E.push({name:"product-details",params:{id:e}})};return G(()=>{_(),I()}),(e,a)=>{const D=i("InputText"),z=i("ProgressSpinner"),R=i("Tag"),w=i("Button"),L=i("Card"),M=i("Dropdown");return d(),h(B,null,[n(Z),t("div",ee,[t("div",te,[se,t("div",ae,[t("span",oe,[le,n(D,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=s=>y.value=s),placeholder:"Search...",onInput:F},null,8,["modelValue"])])])]),x.value?(d(),h("div",ne,[n(z,{style:{width:"50px",height:"50px"}})])):(d(),h("div",ce,[t("div",re,[(d(!0),h(B,null,H(k.value.records,s=>(d(),J(L,{key:s.spuCode,class:O(["shadow-md hover:shadow-lg transition-shadow",{"bg-blue-100":m.value.includes(s.spuCode)}])},{header:f(()=>[t("div",ie,[n(K(Y),{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=C=>m.value=C),value:s.spuCode,onChange:C=>N(s.spuCode)},null,8,["modelValue","value","onChange"]),t("img",{src:s.picUrl,alt:s.productName,class:"h-40 object-contain"},null,8,de)])]),title:f(()=>[t("div",{class:"text-lg font-semibold line-clamp-2",title:s.productName},c(s.productName),9,ue)]),content:f(()=>[t("div",pe,[t("div",ve,[me,t("span",_e,"Â¥"+c(s.price.price),1)]),t("div",he,[fe,n(R,{value:s.platform,severity:s.platform==="TB"?"info":"warning"},null,8,["value","severity"])])])]),footer:f(()=>[t("div",ge,[n(w,{icon:"pi pi-external-link",label:"View",class:"p-button-sm",onClick:C=>$(s.spuCode)},null,8,["onClick"])])]),_:2},1032,["class"]))),128))]),t("div",xe,[t("div",ye," Showing "+c(S.value)+" to "+c(V.value)+" of "+c(b.value)+" entries ",1),t("div",be,[n(M,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=s=>r.value=s),options:[10,20,50,100,300],onChange:U},null,8,["modelValue"]),n(w,{icon:"pi pi-angle-left",class:"p-button-text",disabled:o.value===1,onClick:a[3]||(a[3]=s=>j(o.value-1))},null,8,["disabled"]),t("span",we,"Page "+c(o.value)+" of "+c(v.value),1),n(w,{icon:"pi pi-angle-right",class:"p-button-text",disabled:o.value===v.value,onClick:a[4]||(a[4]=s=>j(o.value+1))},null,8,["disabled"])])])]))])],64)}}},Se=Q(Ce,[["__scopeId","data-v-7a2421df"]]);export{Se as default};
